generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model credential {
  id    String  @id @default(uuid())
  login    String @unique @db.VarChar(255)
  password String @db.VarChar(255)
  role     String @db.VarChar(255)
  userId   String    @unique
  user  user   @relation(fields: [userId], references: [id])
}

model personalInfo {
  id    String  @id @default(uuid())
  user   user   @relation(fields: [userId], references: [id])
  userId    String
  firstname String
  middlename String?
  lastname String
  email      String      @unique @db.VarChar(255)
  dateOfBirth DateTime
  address address[]
}

model address {
  id    String  @id @default(uuid())
  personalInfo    personalInfo  @relation(fields: [personalInfoId], references: [id])
  personalInfoId  String
  address1 String
  address2 String?
  address3 String?
  city     String?
  state    String?
  country  String?
  postalCode String?
}

model student {
  id    String  @id @default(uuid())
  user  user   @relation(fields: [userId], references: [id])
  userId String
  grade      grade[]
  mark       mark[]
  homework   homework[]
}

model user {
  id    String  @id @default(uuid())
  student student?
  personalInfo personalInfo?
  credential credential?
}

model grade {
  id    String  @id @default(uuid())
  symbol String @db.VarChar(255)
  student   student[]
}

model subject {
  id      String  @id @default(uuid())
  name    String   @db.VarChar(255)
}

model mark {
  id String  @id @default(uuid())
  student student @relation(fields: [studentId], references: [id])
  studentId String
  mark String @db.VarChar(255)
  markWeight Int
  markDescription String @db.VarChar(255)
  createdAt DateTime @default(now())
}

model homework {
  id String  @id @default(uuid())
  student student @relation(fields: [studentId], references: [id])
  studentId String
  mark Int
  homeworkDescription String @db.VarChar(255)
  deadline DateTime
  createdAt DateTime @default(now())
}